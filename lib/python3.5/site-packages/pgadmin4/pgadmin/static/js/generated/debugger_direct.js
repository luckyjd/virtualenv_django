define(["translations","pgadmin.browser.endpoints","pgadmin.browser.utils","pgadmin.browser.messages"],function(e,t,r,a){return webpackJsonp([2,3],{153:function(e,t,r){"use strict";var a,i;a=[r(0),r(1),r(4)],void 0!==(i=function(e,t,r){return function(e,a){if(t.isUndefined(a)||t.isNull(a))return!0;r.startsWith(a,"coll-")&&(a=a.replace("coll-",""));var i=["server_group","server","catalog_object_column"];if(t.indexOf(i,a)>=0)return!0;var n=e.get_preference("browser","show_node_"+a);return!n||n.value}}.apply(t,a))&&(e.exports=i)},157:function(e,t,r){"use strict";var a,i;a=[r(2),r(5),r(0),r(1),r(4),r(17),r(3),r(6),r(10),r(11),r(28),r(16),r(97),r(29),r(23),r(26)],void 0!==(i=function(e,t,r,a,i,n,o,s,l,u,d,c,g){var _=d.default;null!=o.Browser.tree&&(o=o||window.pgAdmin||{});var b=o.Tools=o.Tools||{};if(b.DirectDebug)return b.DirectDebug;var p=new function(){};a.extend(p,l.Events,{enable:function(e,t){this.trigger("pgDebugger:button:state:"+e,t)},set_breakpoint:function(e,a,i){var o=t("debugger.set_breakpoint",{trans_id:e,line_no:a,set_type:i});r.ajax({url:o,method:"GET",success:function(e){e.data.status},error:function(e){n.alert("Debugger Error","Error while setting debugging breakpoint.")}})},UpdateBreakpoint:function(e){var t=this,r=t.GetBreakpointInformation(e);if(1!=r.length||-1!=r[0].linenumber){for(var a=new Array,i=0;i<r.length;i++)-1!=r[i].linenumber&&a.push(r[i].linenumber);for(var i=0;i<a.length;i++){void 0!=b.DirectDebug.editor.lineInfo(a[i]-1).gutterMarkers?b.DirectDebug.editor.setGutterMarker(a[i]-1,"breakpoints",null):b.DirectDebug.editor.setGutterMarker(a[i]-1,"breakpoints",function(){var e=document.createElement("div");return e.style.color="#822",e.innerHTML="●",e}())}}},GetBreakpointInformation:function(e){var a="",i=t("debugger.execute_query",{trans_id:e,query_type:"get_breakpoints"});return r.ajax({url:i,method:"GET",async:!1,success:function(e){"Success"===e.data.status?a=e.data.result:"NotConnected"===e.data.status&&n.alert("Debugger Error","Error while fetching breakpoint information.")},error:function(e){n.alert("Debugger Error","Error while fetching breakpoint information.")}}),a},start_execution:function(e,a){var i=this,o=t("debugger.start_execution",{trans_id:e,port_num:a});r.ajax({url:o,method:"GET",success:function(t){"Success"===t.data.status?i.execute_query(e):"NotConnected"===t.data.status&&n.alert("Debugger Error","Error while starting debugging session.")},error:function(e){n.alert("Debugger Error","Error while starting debugging session.")}})},execute_query:function(e){var a=this,i=t("debugger.execute_query",{trans_id:e,query_type:"wait_for_breakpoint"});r.ajax({url:i,method:"GET",success:function(t){if("Success"===t.data.status){if(null!=t.data.result[0].src&&null!=t.data.result[0].linenumber){b.DirectDebug.editor.setValue(t.data.result[0].src);a.active_line_no=t.data.result[0].linenumber-2;b.DirectDebug.editor.addLineClass(t.data.result[0].linenumber-2,"wrap","CodeMirror-activeline-background")}a.GetStackInformation(e),b.DirectDebug.debug_type&&a.poll_end_execution_result(e)}else"NotConnected"===t.data.status&&n.alert("Debugger Error","Error while executing requested debugging information.")},error:function(e){n.alert("Debugger Error","Error while executing requested debugging information.")}})},GetLocalVariables:function(e){var a=this,i=t("debugger.execute_query",{trans_id:e,query_type:"get_variables"});r.ajax({url:i,method:"GET",success:function(t){"Success"===t.data.status?(a.AddLocalVariables(t.data.result),a.AddParameters(t.data.result),b.DirectDebug.debug_restarted&&(b.DirectDebug.debug_type&&a.poll_end_execution_result(e),b.DirectDebug.debug_restarted=!1)):"NotConnected"===t.data.status&&n.alert("Debugger Error","Error while fetching variable information.")},error:function(e){n.alert("Debugger Error","Error while fetching variable information.")}})},GetStackInformation:function(e){var a=this,i=t("debugger.execute_query",{trans_id:e,query_type:"get_stack_info"});r.ajax({url:i,method:"GET",success:function(e){"Success"===e.data.status?(a.AddStackInformation(e.data.result),a.GetLocalVariables(b.DirectDebug.trans_id)):"NotConnected"===e.data.status&&n.alert("Debugger Error","Error while fetching stack information.")},error:function(e){n.alert("Debugger Error","Error while fetching stack information.")}})},poll_result:function(a){var i=this;if(b.DirectDebug.is_polling_required){var o=t("debugger.poll_result",{trans_id:a});if(b.DirectDebug.polling_timeout_idle)var s=1e3;else var s=200;setTimeout(function(){r.ajax({url:o,method:"GET",beforeSend:function(e,t){r(".debugger-container").addClass("show_progress")},success:function(t){r(".debugger-container").removeClass("show_progress"),"Success"===t.data.status?null==t.data.result||0==t.data.result.length?i.poll_result(a):(void 0!=t.data.result[0].src||null!=t.data.result[0].src?(b.DirectDebug.polling_timeout_idle=!1,b.DirectDebug.docker.finishLoading(50),b.DirectDebug.editor.setValue(t.data.result[0].src),i.UpdateBreakpoint(a),b.DirectDebug.editor.removeLineClass(i.active_line_no,"wrap","CodeMirror-activeline-background"),b.DirectDebug.editor.addLineClass(t.data.result[0].linenumber-2,"wrap","CodeMirror-activeline-background"),i.active_line_no=t.data.result[0].linenumber-2,i.GetStackInformation(a)):b.DirectDebug.debug_type||b.DirectDebug.first_time_indirect_debug?(b.DirectDebug.polling_timeout_idle=!1,b.DirectDebug.docker.finishLoading(50),t.data.result[0].src!=b.DirectDebug.editor.getValue()&&(b.DirectDebug.editor.setValue(t.data.result[0].src),i.UpdateBreakpoint(a)),b.DirectDebug.editor.removeLineClass(i.active_line_no,"wrap","CodeMirror-activeline-background"),b.DirectDebug.editor.addLineClass(t.data.result[0].linenumber-2,"wrap","CodeMirror-activeline-background"),i.active_line_no=t.data.result[0].linenumber-2,i.GetStackInformation(a)):(b.DirectDebug.docker.finishLoading(50),void 0!=i.active_line_no&&b.DirectDebug.editor.removeLineClass(i.active_line_no,"wrap","CodeMirror-activeline-background"),i.clear_all_breakpoint(a),i.execute_query(a),b.DirectDebug.first_time_indirect_debug=!0,b.DirectDebug.polling_timeout_idle=!1),i.enable("stop",!0),i.enable("step_over",!0),i.enable("step_into",!0),i.enable("continue",!0),i.enable("toggle_breakpoint",!0),i.enable("clear_all_breakpoints",!0)):"Busy"===t.data.status?(b.DirectDebug.polling_timeout_idle=!0,b.DirectDebug.debug_type?i.poll_result(a):(b.DirectDebug.docker.startLoading(e("Waiting for another session to invoke the target...")),i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("continue",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),b.DirectDebug.first_time_indirect_debug=!1,i.poll_result(a))):"NotConnected"===t.data.status&&n.alert("Debugger Error","Error while polling result.")},error:function(e){n.alert("Debugger Error","Error while polling result.")}})},s)}},update_messages:function(e){e=a.escape(e);var t="",r="";t=b.DirectDebug.messages_panel.$container.find(".messages").html(),r=t?(t+"\n"+e).replace(/(?:\r\n|\r|\n)/g,"<br />").replace(/(<br\ ?\/?>)+/g,"<br />"):e,b.DirectDebug.messages_panel.$container.find(".messages").html(r)},poll_end_execution_result:function(e){var a=this;if(b.DirectDebug.is_polling_required){var i=t("debugger.poll_end_execution_result",{trans_id:e});if(b.DirectDebug.polling_timeout_idle)var o=1200;else var o=250;setTimeout(function(){r.ajax({url:i,method:"GET",success:function(t){"Success"===t.data.status?void 0==t.data.result?(b.DirectDebug.editor.removeLineClass(a.active_line_no,"wrap","CodeMirror-activeline-background"),b.DirectDebug.direct_execution_completed=!0,b.DirectDebug.polling_timeout_idle=!0,n.success(t.info,3),t.data.status_message&&a.update_messages(t.data.status_message),r(".debugger-container").removeClass("show_progress"),a.enable("stop",!1),a.enable("step_over",!1),a.enable("step_into",!1),a.enable("toggle_breakpoint",!1),a.enable("clear_all_breakpoints",!1),a.enable("continue",!0),b.DirectDebug.is_polling_required=!1):null!=t.data.result&&(b.DirectDebug.editor.removeLineClass(a.active_line_no,"wrap","CodeMirror-activeline-background"),a.AddResults(t.data.col_info,t.data.result),b.DirectDebug.results_panel.focus(),b.DirectDebug.direct_execution_completed=!0,b.DirectDebug.polling_timeout_idle=!0,n.success(t.info,3),t.data.status_message&&a.update_messages(t.data.status_message),r(".debugger-container").removeClass("show_progress"),a.enable("stop",!1),a.enable("step_over",!1),a.enable("step_into",!1),a.enable("toggle_breakpoint",!1),a.enable("clear_all_breakpoints",!1),a.enable("continue",!0),b.DirectDebug.is_polling_required=!1):"Busy"===t.data.status?(a.poll_end_execution_result(e),t.data.status_message&&a.update_messages(t.data.status_message)):"NotConnected"===t.data.status?n.alert("Debugger poll end execution error",t.data.result):"ERROR"===t.data.status&&(b.DirectDebug.direct_execution_completed=!0,b.DirectDebug.editor.removeLineClass(a.active_line_no,"wrap","CodeMirror-activeline-background"),b.DirectDebug.is_user_aborted_debugging||n.error(t.info,3),t.data.status_message&&a.update_messages(t.data.status_message),b.DirectDebug.messages_panel.focus(),r(".debugger-container").removeClass("show_progress"),a.enable("stop",!1),a.enable("step_over",!1),a.enable("step_into",!1),a.enable("toggle_breakpoint",!1),a.enable("clear_all_breakpoints",!1),b.DirectDebug.is_user_aborted_debugging||(a.enable("continue",!0),b.DirectDebug.is_user_aborted_debugging=!1),b.DirectDebug.is_polling_required=!1)},error:function(e){n.alert("Debugger Error","Error while polling result.")}})},o)}},Restart:function(e){var a=this,i=t("debugger.restart",{trans_id:e});a.enable("stop",!1),a.enable("step_over",!1),a.enable("step_into",!1),a.enable("toggle_breakpoint",!1),a.enable("clear_all_breakpoints",!1),a.enable("continue",!1),b.DirectDebug.messages_panel.$container.find(".messages").html(""),r.ajax({url:i,success:function(i){var o=i.data.restart_debug?1:0;if(b.DirectDebug.polling_timeout_idle=!1,b.DirectDebug.is_polling_required=!0,a.poll_end_execution_result(e),a.poll_result(e),o&&(b.DirectDebug.debug_restarted=!0),i.data.result.require_input){g(i.data.result,o)}else{var s=t("debugger.start_listener",{trans_id:e});r.ajax({url:s,method:"GET",success:function(t){b.DirectDebug.debug_type&&a.poll_end_execution_result(e)},error:function(e){n.alert("Debugger Error","Error while polling result.")}})}},error:function(e,t,a){try{var i=r.parseJSON(e.responseText);0==i.success&&n.alert(i.errormsg)}catch(e){}}})},Continue:function(e){var a=this;if(a.enable("stop",!1),a.enable("step_over",!1),a.enable("step_into",!1),a.enable("toggle_breakpoint",!1),a.enable("clear_all_breakpoints",!1),a.enable("continue",!1),b.DirectDebug.direct_execution_completed&&b.DirectDebug.direct_execution_completed==b.DirectDebug.polling_timeout_idle)a.Restart(e);else{var i=t("debugger.execute_query",{trans_id:e,query_type:"continue"});r.ajax({url:i,method:"GET",success:function(t){t.data.status?a.poll_result(e):n.alert("Debugger Error","Error while executing continue in debugging session.")},error:function(e){n.alert("Debugger Error","Error while executing continue in debugging session.")}})}},Step_over:function(e){var a=this;a.enable("stop",!1),a.enable("step_over",!1),a.enable("step_into",!1),a.enable("toggle_breakpoint",!1),a.enable("clear_all_breakpoints",!1),a.enable("continue",!1);var i=t("debugger.execute_query",{trans_id:e,query_type:"step_over"});r.ajax({url:i,method:"GET",success:function(t){t.data.status?a.poll_result(e):n.alert("Debugger Error","Error while executing step over in debugging session.")},error:function(e){n.alert("Debugger Error","Error while executing step over in debugging session.")}})},Step_into:function(e){var a=this;a.enable("stop",!1),a.enable("step_over",!1),a.enable("step_into",!1),a.enable("toggle_breakpoint",!1),a.enable("clear_all_breakpoints",!1),a.enable("continue",!1);var i=t("debugger.execute_query",{trans_id:e,query_type:"step_into"});r.ajax({url:i,method:"GET",success:function(t){t.data.status?a.poll_result(e):n.alert("Debugger Error","Error while executing step into in debugging session.")},error:function(e){n.alert("Debugger Error","Error while executing step into in debugging session.")}})},Stop:function(e){var a=this;a.enable("stop",!1),a.enable("step_over",!1),a.enable("step_into",!1),a.enable("toggle_breakpoint",!1),a.enable("clear_all_breakpoints",!1),a.enable("continue",!1);var i=t("debugger.execute_query",{trans_id:e,query_type:"abort_target"});r.ajax({url:i,method:"GET",success:function(e){e.data.status?(b.DirectDebug.editor.removeLineClass(a.active_line_no,"wrap","CodeMirror-activeline-background"),b.DirectDebug.direct_execution_completed=!0,b.DirectDebug.is_user_aborted_debugging=!0,b.DirectDebug.is_polling_required=!1,a.enable("continue",!1),n.success(e.info,3)):"NotConnected"===e.data.status&&n.alert("Debugger Error","Error while executing stop in debugging session.")},error:function(e){n.alert("Debugger Error","Error while executing stop in debugging session.")}})},toggle_breakpoint:function(e){var a=this;a.enable("stop",!1),a.enable("step_over",!1),a.enable("step_into",!1),a.enable("toggle_breakpoint",!1),a.enable("clear_all_breakpoints",!1),a.enable("continue",!1);var i=b.DirectDebug.editor.lineInfo(a.active_line_no),o="";o=void 0==i.gutterMarkers?t("debugger.set_breakpoint",{trans_id:e,line_no:a.active_line_no+1,set_type:"1"}):t("debugger.set_breakpoint",{trans_id:e,line_no:a.active_line_no+1,set_type:"0"}),r.ajax({url:o,method:"GET",success:function(e){if(e.data.status){void 0!=b.DirectDebug.editor.lineInfo(a.active_line_no).gutterMarkers?b.DirectDebug.editor.setGutterMarker(a.active_line_no,"breakpoints",null):b.DirectDebug.editor.setGutterMarker(a.active_line_no,"breakpoints",function(){var e=document.createElement("div");return e.style.color="#822",e.innerHTML="●",e}()),a.enable("stop",!0),a.enable("step_over",!0),a.enable("step_into",!0),a.enable("toggle_breakpoint",!0),a.enable("clear_all_breakpoints",!0),a.enable("continue",!0)}else"NotConnected"===e.data.status&&n.alert("Debugger Error","Error while toggling breakpoint.")},error:function(e){n.alert("Debugger Error","Error while toggling breakpoint.")}})},clear_all_breakpoint:function(e){var a=this,i=a.GetBreakpointInformation(e);if(1!=i.length||-1!=i[0].linenumber){a.enable("stop",!1),a.enable("step_over",!1),a.enable("step_into",!1),a.enable("toggle_breakpoint",!1),a.enable("clear_all_breakpoints",!1),a.enable("continue",!1);for(var o=new Array,s=0;s<i.length;s++)-1!=i[s].linenumber&&o.push(i[s].linenumber);var l=t("debugger.clear_all_breakpoint",{trans_id:e});r.ajax({url:l,method:"POST",data:{breakpoint_list:o.join()},success:function(e){if(e.data.status)for(var t=0;t<o.length;t++){var r=b.DirectDebug.editor.lineInfo(o[t]-1);r&&void 0!=r.gutterMarkers&&b.DirectDebug.editor.setGutterMarker(o[t]-1,"breakpoints",null)}a.enable("stop",!0),a.enable("step_over",!0),a.enable("step_into",!0),a.enable("toggle_breakpoint",!0),a.enable("clear_all_breakpoints",!0),a.enable("continue",!0)},error:function(e){n.alert("Debugger Error","Error while clearing all breakpoint.")}})}},AddStackInformation:function(e){var t=this;t.stack_grid&&(t.stack_grid.remove(),t.stack_grid=null);var r=l.Model.extend({defaults:{name:void 0,value:void 0,line_no:void 0}}),a=l.Collection.extend({model:r}),i=[{name:"name",label:"Name",type:"text",editable:!1,cell:"string"},{name:"value",label:"Value",type:"text",editable:!1,cell:"string"},{name:"line_no",label:"Line No.",type:"text",editable:!1,cell:"string"}],n=[];if(0!=e.length)for(var o=0;o<e.length;o++)n.push({name:e[o].targetname,value:e[o].args,line_no:e[o].linenumber});var s=this.stackColl=new a(n);this.stackColl.on("backgrid:row:selected",t.select_frame,t);var d=this.stack_grid=new u.Grid({columns:i,row:u.Row.extend({highlightColor:"#D9EDF7",disabledColor:"#F1F1F1",events:{click:"rowClick"},rowClick:function(e){for(var r=0;r<this.model.collection.length;r++)if(this.model.collection.models[r].get("name")==this.model.get("name")){t.frame_id_=r;break}this.model.trigger("backgrid:row:selected",this),t.stack_grid.$el.find("td").css("background-color",this.disabledColor),this.$el.find("td").css("background-color",this.highlightColor)}}),collection:s,className:"backgrid table-bordered"});d.render(),b.DirectDebug.stack_pane_panel.$container.find(".stack_pane").append(d.el)},AddResults:function(e,t){var r=this;r.result_grid&&(r.result_grid.remove(),r.result_grid=null);var i=l.Model.extend({defaults:{name:void 0}}),n=l.Collection.extend({model:i}),o=[];a.size(e)&&a.each(e,function(e){var t={type:"text",editable:!1,cell:"string"};t.name=t.label=e.name,o.push(t)});var s=this.result_grid=new u.Grid({columns:o,collection:new n(t),className:"backgrid table-bordered"});s.render(),b.DirectDebug.results_panel.$container.find(".debug_results").append(s.el)},AddLocalVariables:function(e){var t=this;t.variable_grid&&(t.variable_grid.remove(),t.variable_grid=null);var r=l.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),a=l.Collection.extend({model:r}),i=[{name:"name",label:"Name",type:"text",editable:!1,cell:"string"},{name:"type",label:"Type",type:"text",editable:!1,cell:"string"},{name:"value",label:"Value",type:"text",cell:"string"}],n=[];if(0!=e.length)for(var o=0;o<e.length;o++)"L"==e[o].varclass&&n.push({name:e[o].name,type:e[o].dtype,value:e[o].value});var s=this.variable_grid=new u.Grid({columns:i,collection:new a(n),className:"backgrid table-bordered"});s.render(),b.DirectDebug.local_variables_panel.$container.find(".local_variables").append(s.el)},AddParameters:function(e){var t=this;t.param_grid&&(t.param_grid.remove(),t.param_grid=null);var r=l.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),a=t.ParametersCollection=l.Collection.extend({model:r});t.ParametersCollection.prototype.on("change",t.deposit_parameter_value,t);var i=[{name:"name",label:"Name",type:"text",editable:!1,cell:"string"},{name:"type",label:"Type",type:"text",editable:!1,cell:"string"},{name:"value",label:"Value",type:"text",cell:"string"}],n=[];if(0!=e.length)for(var o=0;o<e.length;o++)"A"==e[o].varclass&&n.push({name:e[o].name,type:e[o].dtype,value:e[o].value});var s=this.param_grid=new u.Grid({columns:i,collection:new a(n),className:"backgrid table-bordered"});s.render(),b.DirectDebug.parameters_panel.$container.find(".parameters").append(s.el)},deposit_parameter_value:function(e){var a=this,i=[];i.push({name:e.get("name"),type:e.get("type"),value:e.get("value")});var o=t("debugger.deposit_value",{trans_id:b.DirectDebug.trans_id});r.ajax({url:o,method:"POST",data:{data:JSON.stringify(i)},success:function(e){e.data.status&&(a.GetLocalVariables(b.DirectDebug.trans_id),e.data.result?n.success(e.data.info,3):n.error(e.data.info,3))},error:function(e){n.alert("Debugger Error","Error while depositing variable value.")}})},select_frame:function(e,a){var i=this,o=t("debugger.select_frame",{trans_id:b.DirectDebug.trans_id,frame_id:i.frame_id_});r.ajax({url:o,method:"GET",success:function(e){e.data.status&&(b.DirectDebug.editor.setValue(e.data.result[0].src),i.UpdateBreakpoint(b.DirectDebug.trans_id),b.DirectDebug.editor.addLineClass(e.data.result[0].linenumber-2,"wrap","CodeMirror-activeline-background"),i.GetLocalVariables(b.DirectDebug.trans_id))},error:function(e){n.alert("Debugger Error","Error while selecting frame.")}})}});var f=l.View.extend({el:"#btn-toolbar",initialize:function(){p.on("pgDebugger:button:state:stop",this.enable_stop,this),p.on("pgDebugger:button:state:step_over",this.enable_step_over,this),p.on("pgDebugger:button:state:step_into",this.enable_step_into,this),p.on("pgDebugger:button:state:continue",this.enable_continue,this),p.on("pgDebugger:button:state:toggle_breakpoint",this.enable_toggle_breakpoint,this),p.on("pgDebugger:button:state:clear_all_breakpoints",this.enable_clear_all_breakpoints,this)},events:{"click .btn-stop":"on_stop","click .btn-clear-breakpoint":"on_clear_all_breakpoint","click .btn-toggle-breakpoint":"on_toggle_breakpoint","click .btn-continue":"on_continue","click .btn-step-over":"on_step_over","click .btn-step-into":"on_step_into"},enable_stop:function(e){var t=this.$el.find(".btn-stop");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_over:function(e){var t=this.$el.find(".btn-step-over");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_into:function(e){var t=this.$el.find(".btn-step-into");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_continue:function(e){var t=this.$el.find(".btn-continue");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_toggle_breakpoint:function(e){var t=this.$el.find(".btn-toggle-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_clear_all_breakpoints:function(e){var t=this.$el.find(".btn-clear-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},on_stop:function(){p.Stop(b.DirectDebug.trans_id)},on_clear_all_breakpoint:function(){p.clear_all_breakpoint(b.DirectDebug.trans_id)},on_toggle_breakpoint:function(){p.toggle_breakpoint(b.DirectDebug.trans_id)},on_continue:function(){p.Continue(b.DirectDebug.trans_id)},on_step_over:function(){p.Step_over(b.DirectDebug.trans_id)},on_step_into:function(){p.Step_into(b.DirectDebug.trans_id)}}),v=function(){};return a.extend(v.prototype,{init:function(e,i){var o=this;if(a.bindAll(b.DirectDebug,"messages"),!this.initialized){this.initialized=!0,this.trans_id=e,this.debug_type=i,this.first_time_indirect_debug=!1,this.direct_execution_completed=!1,this.polling_timeout_idle=!1,this.debug_restarted=!1,this.is_user_aborted_debugging=!1,this.is_polling_required=!0;this.docker=new wcDocker("#container",{allowContextMenu:!1,allowCollapse:!1,themePath:t("static",{filename:"css"}),theme:"webcabin.overrides.css"});if(this.panels=[],void 0==e||i)if(void 0!=e&&i){var s=t("debugger.start_listener",{trans_id:e});r.ajax({url:s,method:"GET",success:function(t){t.data.status&&o.messages(e)},error:function(e){n.alert("Debugger Error","Error while starting debugging listener.")}})}else this.intializePanels();else{var s=t("debugger.start_listener",{trans_id:e});r.ajax({url:s,method:"GET",success:function(t){t.data.status&&(o.intializePanels(),p.poll_result(e))},error:function(e){n.alert("Debugger Error","Error while starting debugging listener.")}})}}},messages:function(e){var a=this,i=t("debugger.messages",{trans_id:e});r.ajax({url:i,method:"GET",success:function(t){"Success"===t.data.status?(a.intializePanels(),p.start_execution(e,t.data.result)):"Busy"===t.data.status?a.messages(e):"NotConnected"===t.data.status&&n.alert("Not connected to server or connection with the server has been closed.",t.data.result)},error:function(e){n.alert("Debugger Error","Error while fetching messages information.")}})},onBreakPoint:function(e,t,r){var a=this;if("breakpoints"==r&&!b.DirectDebug.polling_timeout_idle){var i=e.lineInfo(t);void 0==i.gutterMarkers?p.set_breakpoint(a.trans_id,t+1,1):void 0==i.gutterMarkers.breakpoints?p.set_breakpoint(a.trans_id,t+1,1):p.set_breakpoint(a.trans_id,t+1,0);var n=i.gutterMarkers;void 0!=n&&void 0==i.gutterMarkers.breakpoints&&(n=i.gutterMarkers.breakpoints),e.setGutterMarker(t,"breakpoints",n?null:function(){var e=document.createElement("div");return e.style.color="#822",e.innerHTML="●",e}())}},intializePanels:function(){var t=this;this.registerPanel("code",!1,"100%","50%",function(r){var a=new o.Browser.Panel({name:"parameters",title:e("Parameters"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="parameters" class="parameters"></div>'}),i=new o.Browser.Panel({name:"local_variables",title:e("Local variables"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="local_variables" class="local_variables"></div>'}),n=new o.Browser.Panel({name:"messages",title:e("Messages"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="messages" class="messages"></div>'}),s=new o.Browser.Panel({name:"results",title:e("Results"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="debug_results" class="debug_results"></div>'}),l=new o.Browser.Panel({name:"stack_pane",title:e("Stack"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="stack_pane" class="stack_pane"></div>'});a.load(t.docker),i.load(t.docker),n.load(t.docker),s.load(t.docker),l.load(t.docker)}),t.code_editor_panel=t.docker.addPanel("code",wcDocker.DOCK.TOP),t.parameters_panel=t.docker.addPanel("parameters",wcDocker.DOCK.BOTTOM,t.code_editor_panel),t.local_variables_panel=t.docker.addPanel("local_variables",wcDocker.DOCK.STACKED,t.parameters_panel,{tabOrientation:wcDocker.TAB.TOP}),t.messages_panel=t.docker.addPanel("messages",wcDocker.DOCK.STACKED,t.parameters_panel),t.results_panel=t.docker.addPanel("results",wcDocker.DOCK.STACKED,t.parameters_panel),t.stack_pane_panel=t.docker.addPanel("stack_pane",wcDocker.DOCK.STACKED,t.parameters_panel);var a=r('<div id="stack_editor_pane" class="full-container-pane info"></div>'),i=r('<textarea id="debugger-editor-textarea"></textarea>').append(a);t.code_editor_panel.layout().addItem(i);var n=(t.editor=_.fromTextArea(i.get(0),{lineNumbers:!0,foldOptions:{widget:"…"},foldGutter:{rangeFinder:_.fold.combine(_.pgadminBeginRangeFinder,_.pgadminIfRangeFinder,_.pgadminLoopRangeFinder,_.pgadminCaseRangeFinder)},gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","breakpoints"],mode:"text/x-pgsql",readOnly:!0,extraKeys:o.Browser.editor_shortcut_keys,tabSize:o.Browser.editor_options.tabSize,lineWrapping:o.Browser.editor_options.wrapCode,autoCloseBrackets:o.Browser.editor_options.insert_pair_brackets,matchBrackets:o.Browser.editor_options.brace_matching}),function(){t.docker.finishLoading(100),t.docker.off(wcDocker.EVENT.LOADED),t.editor.on("gutterClick",t.onBreakPoint.bind(t),t)});t.docker.startLoading(e("Loading...")),t.docker.on(wcDocker.EVENT.LOADED,n),this.toolbarView=new f},registerPanel:function(e,t,a,i,n){var o=this;this.docker.registerPanelType(e,{title:t,isPrivate:!0,onCreate:function(s){o.panels[e]=s,s.initSize(a,i),t?s.title(t):s.title(!1),s.closeable(!1),s.layout().addItem(r("<div>",{class:"pg-debugger-panel"})),n&&n.apply(o,[s])}})}}),b.DirectDebug=new v,b.DirectDebug.jquery=r,b.DirectDebug}.apply(t,a))&&(e.exports=i)},2:function(e,t,r){"use strict";var a,i;a=[r(43)],void 0!==(i=function(e){return function(t,r){var a,i=e[t]?e[t]:t,n=/([^%]*)%\(([^\)]+)\)s(.*)/,o=i;do{a=!1,o=o.replace(n,function(e,t,i,n){return a=!0,t+r[i]+n})}while(a);return o}}.apply(t,a))&&(e.exports=i)},28:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(13),i=function(e){return e&&e.__esModule?e:{default:e}}(a);r(49),r(84),r(85),r(74),r(86),r(87),r(88),r(89),r(50),r(90),r(75),r(91),r(92),r(93),r(94),r(37),t.default=i.default},3:function(e,t,r){"use strict";var a,i,n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r){i=[],a=r,void 0!==(n="function"==typeof a?a.apply(t,i):a)&&(e.exports=n)}(function(){var e=window.pgAdmin=window.pgAdmin||{};return function(e,t,r){function a(e,t,a,n){a=a||"width";var o,l,u,g=(t.match(d)||[])[2],_="px"===g?1:c[g+"toPx"],b=/r?em/i;if(_||b.test(g)&&!n)e=_?e:"rem"===g?s:"fontSize"===a?e.parentNode||e:e,_=_||parseFloat(i(e,"fontSize")),u=parseFloat(t)*_;else{o=e.style,l=o[a];try{o[a]=t}catch(e){return 0}u=o[a]?parseFloat(i(e,a)):0,o[a]=l!==r?l:null}return u}function i(e,t){var r,o,s,l,c,g=/^top|bottom/,_=["paddingTop","paddingBottom","borderTop","borderBottom"],b=4;if(r=u?u(e)[t]:(o=e.style["pixel"+t.charAt(0).toUpperCase()+t.slice(1)])?o+"px":"fontSize"===t?a(e,"1em","left",1)+"px":e.currentStyle[t],"%"===(s=(r.match(d)||[])[2])&&n)if(g.test(t)){for(l=(c=e.parentNode||e).offsetHeight;b--;)l-=parseFloat(i(c,_[b]));r=parseFloat(r)/100*l+"px"}else r=a(e,r);else("auto"===r||s&&"px"!==s)&&u?r=0:s&&"px"!==s&&!u&&(r=a(e,r)+"px");return r}var n,o=t.createElement("test"),s=t.documentElement,l=t.defaultView,u=l&&l.getComputedStyle,d=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,c={},g=[1/25.4,1/2.54,1/72,1/6],_=["mm","cm","pt","pc","in","mozmm"],b=6;for(s.appendChild(o),u&&(o.style.marginTop="1%",n="1%"===u(o).marginTop);b--;)c[_[b]+"toPx"]=g[b]?g[b]*c.inToPx:a(o,"1"+_[b]);s.removeChild(o),o=r,e.toPx=a}(e,window.document),e.natural_sort=function(e,t,r){var a,i,n=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,s=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,d=/^0/,r=r||{},c=function(e){return r.insensitive&&(""+e).toLowerCase()||""+e},g=c(e).replace(s,"")||"",_=c(t).replace(s,"")||"",b=g.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=_.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=parseInt(g.match(u))||1!==b.length&&g.match(l)&&Date.parse(g),v=parseInt(_.match(u))||f&&_.match(l)&&Date.parse(_)||null,m=r.desc?-1:1;if(v){if(f<v)return-1*m;if(f>v)return 1*m}for(var h=0,D=Math.max(b.length,p.length);h<D;h++){if(a=!(b[h]||"").match(d)&&parseFloat(b[h])||b[h]||0,i=!(p[h]||"").match(d)&&parseFloat(p[h])||p[h]||0,isNaN(a)!==isNaN(i))return(isNaN(a)?1:-1)*m;if((void 0===a?"undefined":o(a))!==(void 0===i?"undefined":o(i))&&(a+="",i+=""),a<i)return-1*m;if(a>i)return 1*m}return 0},e})},37:function(e,t,r){"use strict";(function(e){var a,i,n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s){"object"==o(t)&&"object"==o(e)?s(r(13)):(i=[r(13)],a=s,void 0!==(n="function"==typeof a?a.apply(t,i):a)&&(e.exports=n))}(function(e){e.pgadminKeywordRangeFinder=function(t,r,a,i){for(var n,o,s=r.line,l=t.getLine(s),u=l.length;u>0;){var d=l.lastIndexOf(a,u),c=a,g=i;if(d<r.ch){var d=l.lastIndexOf("[",u);if(d<r.ch)break;var c="[",g="]"}if(o=t.getTokenAt(e.Pos(s,d+1)).type,!/^(comment|string)/.test(o)){n=d;break}u=d-1}if(!(null==n||l.lastIndexOf(c)>n)){var _,b,p=1,f=t.lineCount();e:for(var v=s+1;v<f;++v)for(var m=t.getLine(v),h=0;;){var D=m.indexOf(c,h),k=m.indexOf(g,h);if(D<0&&(D=m.length),k<0&&(k=m.length),(h=Math.min(D,k))==m.length)break;if(t.getTokenAt(e.Pos(v,h+1)).type==o)if(h==D)++p;else if(!--p){_=v,b=h;break e}++h}if(null!=_&&_!=s+1)return{from:e.Pos(s,n+a.length),to:e.Pos(_,b)}}},e.pgadminBeginRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"BEGIN","END;")},e.pgadminIfRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"IF","END IF")},e.pgadminLoopRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"LOOP","END LOOP")},e.pgadminCaseRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"CASE","END CASE")}})}).call(t,r(45)(e))},43:function(t,r){t.exports=e},44:function(e,r){e.exports=t},5:function(e,t,r){"use strict";var a,i;a=[r(44)],void 0!==(i=function(e){return function(t,r){var a=e[t],i=/([<])([^:^>]*:)?([^>]+)([>])/g,n=a;return a?n=n.replace(i,function(e,t,a,i){return i in r?r[i]:e}):a}}.apply(t,a))&&(e.exports=i)},76:function(e,t){e.exports=r},95:function(e,t){e.exports=a},96:function(e,t,r){"use strict";function a(e,t,r,a,i,o){var s="";return n.default.each(n.default.sortBy(n.default.pick(t,i),function(e){return e.priority}),function(e){s=s+"/"+encodeURI(e._id)}),s=o?s+"/"+o:s+"/",""+e+a+"/"+r+s}var i=r(1),n=function(e){return e&&e.__esModule?e:{default:e}}(i);e.exports={generate_url:a}},97:function(e,t,r){"use strict";var a,i;a=[r(2),r(5),r(0),r(1),r(4),r(8),r(3),r(6),r(10),r(11),r(13),r(16),r(29),r(23),r(26),r(154)],void 0!==(i=function(e,t,r,a,i,n,o,s,l,u,d,c){var g=function(e){var t=e.get("type");if(-1!=t.indexOf("[]"))return-1!=t.indexOf("integer")?u.Extension.InputIntegerArrayCell:u.Extension.InputStringArrayCell;switch(t){case"bool":return u.BooleanCell;case"integer":return void 0!=e.get("value")&&e.set({value:parseInt(e.get("value"))},{silent:!0}),u.IntegerCell;case"real":return void 0!=e.get("value")&&e.set({value:parseFloat(e.get("value"))},{silent:!0}),u.NumberCell;case"string":return u.StringCell;case"date":return u.DateCell;default:return u.Cell}},_=function(e){return-1!=e.get("type").indexOf("[]")?u.StringCell:u.BooleanCell},b=l.Model.extend({defaults:{name:void 0,type:void 0,is_null:void 0,expr:void 0,value:void 0,use_default:void 0,default_value:void 0},validate:function(){if(a.isUndefined(this.get("value"))||a.isNull(this.get("value"))||""==String(this.get("value")).replace(/^\s+|\s+$/g,"")){var t=e("Please enter a value for the parameter.");return this.errorModel.set("value",t),t}return this.errorModel.unset("value"),null}}),p=l.Collection.extend({model:b}),f=function(e){return e instanceof l.Model&&e.get("use_default")},v=function(e){e.get("type");if(e instanceof l.Model){return-1==e.get("type").indexOf("[]")}};return function(e,i){n.debuggerInputArgsDialog||n.dialog("debuggerInputArgsDialog",function(){return{main:function(e,i,o){this.set("title",e),this.data=i,this.restart_debug=o;var l=this.func_args_data=[];if(0==o){var d=s.tree,c=d.selected(),b=c&&1==c.length?d.itemData(c):void 0,m=b&&s.Nodes[b._type];if(!b)return;var h=m.getTreeNodeHierarchy.apply(m,[c]);if("function"==b._type)var D=t("debugger.get_arguments",{sid:h.server._id,did:h.database._id,scid:h.schema._id,func_id:h.function._id});else if("procedure"==b._type)var D=t("debugger.get_arguments",{sid:h.server._id,did:h.database._id,scid:h.schema._id,func_id:h.procedure._id});else if("edbfunc"==b._type)var D=t("debugger.get_arguments",{sid:h.server._id,did:h.database._id,scid:h.schema._id,func_id:h.edbfunc._id});else if("edbproc"==b._type)var D=t("debugger.get_arguments",{sid:h.server._id,did:h.database._id,scid:h.schema._id,func_id:h.edbproc._id})}else var D=t("debugger.get_arguments",{sid:this.data.server_id,did:this.data.database_id,scid:this.data.schema_id,func_id:this.data.function_id});r.ajax({url:D,method:"GET",async:!1,success:function(e){if(0!=e.data.args_count)for(c=0;c<e.data.result.length;c++)l.push({arg_id:e.data.result[c].arg_id,is_null:e.data.result[c].is_null,is_expression:e.data.result[c].is_expression,use_default:e.data.result[c].use_default,value:e.data.result[c].value})},error:function(e){n.alert("Debugger Set arguments error")}});var k,y,x,w,E,C,S=u.HeaderCell.extend({className:"width_percent_25"}),N=[],T=[{name:"name",label:"Name",type:"text",editable:!1,cell:"string"},{name:"type",label:"Type",type:"text",editable:!1,cell:"string"},{name:"is_null",label:"Null?",type:"boolean",cell:"boolean"},{name:"expr",label:"Expression?",type:"boolean",cellFunction:_,editable:v},{name:"value",label:"Value",type:"text",editable:!0,cellFunction:g,headerCell:S},{name:"use_default",label:"Use Default?",type:"boolean",cell:"boolean",editable:f},{name:"default_value",label:"Default value",type:"text",editable:!1,cell:"string"}],P=[],O=[],M=this.input_arg_id=[];if(null!=this.data.proargmodes)for(var L=this.data.proargmodes.split(","),A=0;A<L.length;A++)"i"!=L[A]&&"b"!=L[A]||M.push(A);else for(var G=this.data.proargtypenames.split(","),A=0;A<G.length;A++)M.push(A);if(y=this.data.proargtypenames.split(","),null!=this.data.proargmodes&&(x=this.data.proargmodes.split(",")),this.data.pronargdefaults&&(w=this.data.pronargdefaults,E=this.data.proargdefaults.split(","),C=w),null!=this.data.proargnames){k=this.data.proargnames.split(",");for(var I=k.length-1;I>=0;I--)null!=this.data.proargmodes?!C||"i"!=x[I]&&"b"!=x[I]?N[I]="<No default value>":(C-=1,N[I]=E[C]):C?(C-=1,N[I]=E[C]):N[I]="<No default value>";if(0!=y.length)for(c=0;c<y.length;c++)if(null!=this.data.proargmodes){if("i"==x[c]||"b"==x[c]){var B=!1;"<No default value>"!=N[c]&&(B=!0),P.push({name:k[c],type:y[c],use_default:B,default_value:N[c]})}}else{var B=!1;"<No default value>"!=N[c]&&(B=!0),P.push({name:k[c],type:y[c],use_default:B,default_value:N[c]})}if(0!=l.length)for(c=0;c<l.length;c++){var j=l[c].arg_id,q=[];if(-1!=y[j].indexOf("[]")){var F=l[c].value.split(",");-1!=y[j].indexOf("integer")&&a.each(F,function(e){q.push({value:parseInt(e)})}),a.each(F,function(e){q.push({value:e})})}else q=l[c].value;O.push({name:k[j],type:y[j],is_null:!!l[c].is_null,expr:!!l[c].is_expression,value:q,use_default:!!l[c].use_default,default_value:N[j]})}}else{var $=[];for(c=0;c<y.length;c++)$[c]="dbgparam"+(c+1);if(this.data.pronargdefaults){for(var I=$.length-1;I>=0;I--)null==this.data.proargmodes?C?(C-=1,N[I]=E[C]):N[I]="<No default value>":!C||"i"!=x[I]&&"b"!=x[I]?N[I]="<No default value>":(C-=1,N[I]=E[C]);for(c=0;c<y.length;c++)if(null==this.data.proargmodes){var B=!1;"<No default value>"!=N[c]&&(B=!0),P.push({name:$[c],type:y[c],use_default:B,default_value:N[c]})}else if("i"==x[c]||"b"==x[c]){var B=!1;"<No default value>"!=N[c]&&(B=!0),P.push({name:$[c],type:y[c],use_default:B,default_value:N[c]})}}else for(c=0;c<y.length;c++)P.push({name:$[c],type:y[c],use_default:!1,default_value:"<No default value>"}),N[c]="<No default value>";if(0!=l.length)for(c=0;c<l.length;c++){var j=l[c].arg_id,q=[];if(-1!=y[j].indexOf("[]")){var F=l[c].value.split(",");-1!=y[j].indexOf("integer")&&a.each(F,function(e){q.push({value:parseInt(e)})}),a.each(F,function(e){q.push({value:e})})}else q=l[c].value;O.push({name:$[j],type:y[j],is_null:!!l[c].is_null,expr:!!l[c].is_expression,value:q,use_default:!!l[c].use_default,default_value:N[j]})}}if(0==l.length)var R=this.debuggerInputArgsColl=new p(P);else var R=this.debuggerInputArgsColl=new p(O);this.grid&&(this.grid.remove(),this.grid=null);var z=this.grid=new u.Grid({columns:T,collection:R,className:"backgrid table-bordered"});z.render(),r(this.elements.content).html(z.el)},setup:function(){return{buttons:[{text:"Debug",key:13,className:"btn btn-primary"},{text:"Cancel",key:27,className:"btn btn-primary"}],options:{modal:0,resizable:!0}}},callback:function(e){if("Debug"===e.button.text){var a=this;if(0==a.restart_debug){var i=s.tree,o=i.selected(),l=o&&1==o.length?i.itemData(o):void 0,u=l&&s.Nodes[l._type];if(!l)return;var d=u.getTreeNodeHierarchy.apply(u,[o])}var c=[],g=this.sqlite_func_args_list=[],_=0;if(this.grid.collection.each(function(e){if(e.get("is_null")?c.push({name:e.get("name"),type:e.get("type"),value:"NULL"}):e.get("use_default")?c.push({name:e.get("name"),type:e.get("type"),value:e.get("default_value")}):c.push({name:e.get("name"),type:e.get("type"),value:e.get("value")}),0==a.restart_debug){var t;"function"==l._type?t=d.function._id:"procedure"==l._type?t=d.procedure._id:"edbfunc"==l._type?t=d.edbfunc._id:"edbproc"==l._type&&(t=d.edbproc._id),g.push({server_id:d.server._id,database_id:d.database._id,schema_id:d.schema._id,function_id:t,arg_id:a.input_arg_id[_],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")})}else g.push({server_id:a.data.server_id,database_id:a.data.database_id,schema_id:a.data.schema_id,function_id:a.data.function_id,arg_id:a.input_arg_id[_],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")});_+=1}),0==a.restart_debug){var b;"function"==l._type?b=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:d.server._id,did:d.database._id,scid:d.schema._id,func_id:d.function._id}):"procedure"==l._type?b=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:d.server._id,did:d.database._id,scid:d.schema._id,func_id:d.procedure._id}):"edbfunc"==l._type?b=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:d.server._id,did:d.database._id,scid:d.schema._id,func_id:d.edbfunc._id}):"edbproc"==l._type&&(b=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:d.server._id,did:d.database._id,scid:d.schema._id,func_id:d.edbproc._id})),r.ajax({url:b,method:"POST",data:{data:JSON.stringify(c)},success:function(e){var a=t("debugger.direct",{trans_id:e.data.debuggerTransId});if(e.data.newBrowserTab)window.open(a,"_blank");else{s.Events.once("pgadmin-browser:frame:urlloaded:frm_debugger",function(e){e.openURL(a)});var i=s.docker.findPanels("properties"),o=s.docker.addPanel("frm_debugger",wcDocker.DOCK.STACKED,i[0]);o.focus(),o.on(wcDocker.EVENT.CLOSED,function(){var a=t("debugger.close",{trans_id:e.data.debuggerTransId});r.ajax({url:a,method:"DELETE"})})}if("function"==l._type)var u=t("debugger.set_arguments",{sid:d.server._id,did:d.database._id,scid:d.schema._id,func_id:d.function._id});else if("procedure"==l._type)var u=t("debugger.set_arguments",{sid:d.server._id,did:d.database._id,scid:d.schema._id,func_id:d.procedure._id});else if("edbfunc"==l._type)var u=t("debugger.set_arguments",{sid:d.server._id,did:d.database._id,scid:d.schema._id,func_id:d.edbfunc._id});else if("edbproc"==l._type)var u=t("debugger.set_arguments",{sid:d.server._id,did:d.database._id,scid:d.schema._id,func_id:d.edbproc._id});r.ajax({url:u,method:"POST",data:{data:JSON.stringify(g)},success:function(e){},error:function(e){n.alert("Debugger Set arguments error")}})},error:function(e){n.alert("Debugger target Initialize Error",e.responseJSON.errormsg)}})}else{var b=t("debugger.start_listener",{trans_id:a.data.trans_id});r.ajax({url:b,method:"POST",data:{data:JSON.stringify(c)},success:function(e){},error:function(e){n.alert("Debugger listener starting error",e.responseJSON.errormsg)}});var p=t("debugger.set_arguments",{sid:a.data.server_id,did:a.data.database_id,scid:a.data.schema_id,func_id:a.data.function_id});r.ajax({url:p,method:"POST",data:{data:JSON.stringify(g)},success:function(e){},error:function(e){n.alert("Debugger Set arguments error")}})}return!0}if("Cancel"===e.button.text)return!1},build:function(){},prepare:function(){0==this.func_args_data.length?this.__internal.buttons[0].element.disabled=!0:this.__internal.buttons[0].element.disabled=!1,this.grid.listenTo(this.debuggerInputArgsColl,"backgrid:edited",function(e){return function(){for(var t=!1,r=0;r<this.collection.length;r++)if(""==this.collection.models[r].get("value")||null==this.collection.models[r].get("value")||void 0==this.collection.models[r].get("value")){if(t=!0,!this.collection.models[r].get("use_default")){e.__internal.buttons[0].element.disabled=!0;break}e.__internal.buttons[0].element.disabled=!1}t||(e.__internal.buttons[0].element.disabled=!1)}}(this))}}}),n.debuggerInputArgsDialog("Debugger",e,i).resizeTo("60%","60%")}}.apply(t,a))&&(e.exports=i)}},[157]).default});